<!DOCTYPE html>   
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ciberseguridad Comentarios</title>
    <link href="./style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="icon" type="image/jpg" href="/static/hacker.jpg">

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom right,#1a2a6c,#e77828,#9babef #b21f1f, #ed3a9d, #28e7da); /* Fondo con degradado ajustado para un diseño más acorde */
            color: #fff; /* Texto blanco para mejor contraste */
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .container {
            width: 90%;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: rgba(30, 30, 30, 0.9); /* Fondo con transparencia para que se vea el degradado */
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);
            text-align: center;
            position: relative;
            z-index: 2;
        }

        h1 {
            color: #ea2828; /* Color dorado para el título */
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }

        img {
            width: 100%;
            height: auto;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        #comentarios {
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #fdbb2d;
            border-radius: 10px;
            background: #333;
            box-sizing: border-box;
        }

        textarea {
            width: calc(100% - 30px);
            padding: 15px;
            border-radius: 10px;
            border: none;
            margin-bottom: 15px;
            background: #444;
            color: #fff;
            font-size: 1rem;
            resize: vertical;
            box-sizing: border-box;
            outline: none; /* Elimina el borde adicional al enfocarse */
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            justify-content: center;
        }

        button {
            background-color: #ef0c0c;
            color: #1a1a1a;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 10px;
            font-size: 1rem;
            transition: background-color 0.3s, transform 0.2s;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            background-color: #e5a623;
            transform: translateY(-3px);
        }

        button:active {
            transform: scale(0.95);
        }

        button i {
            margin-right: 8px;
        }

        button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 300%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s;
        }

        button:hover::after {
            left: 100%;
        }

        .alert {
            padding: 15px;
            background-color: #505050;
            margin-bottom: 15px;
            border-radius: 10px;
            word-wrap: break-word;
            text-align: left;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            box-sizing: border-box;
        }

        #jsonOutput {
            background: #444;
            padding: 15px;
            width: calc(100% - 30px);
            overflow: auto;
            height: 200px; /* Altura fija con scroll */
            margin-top: 20px;
            white-space: pre-wrap; /* Respeta los espacios y saltos de línea en el JSON */
            border-radius: 10px;
            box-sizing: border-box;
        }

        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(-45deg, #1a2a6c, #d82727, #4fd7d5, #fdbb2d);
            background-size: 400% 400%;
            animation: gradientBackground 7.5s ease infinite; /* Aumenta la velocidad de cambio de colores */
        }

        @keyframes gradientBackground {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <div class="animated-background"></div>
    <div class="container">
        <h1>¿Qué Opinas Sobre Ciberseguridad?</h1>
        <img src="/static/cyberseguridad.jpg" alt="Ciberseguridad">
        <div id="comentarios">
            <!-- Los comentarios se agregarán aquí dinámicamente -->
        </div>
        <form id="formComentario">
            <textarea class="form-control" id="nuevoComentario" placeholder="Agrega tu comentario aquí..."></textarea>
            <div class="button-container">
                <button type="button" onclick="agregarComentario()"><i class="fas fa-comment-dots"></i>Agregar Comentario</button>
                <button type="button" onclick="mostrarComentariosJSON()"><i class="fas fa-file-code"></i>Ver Comentarios JSON</button>
            </div>
            <pre id="jsonOutput"></pre>
        </form>
    </div>

    <script>
        async function agregarComentario() {
            const comentario = document.getElementById('nuevoComentario').value;
            if (comentario.trim() === '') {
                alert('Por favor, ingresa un comentario antes de agregar.');
                return;
            }
            const response = await fetch('/agregar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({comentario: comentario})
            });
            const data = await response.json();
            const comentariosContainer = document.getElementById('comentarios');
            comentariosContainer.innerHTML = '';
            data.comentarios.forEach(com => {
                const div = document.createElement('div');
                div.className = 'alert';
                div.textContent = com;
                comentariosContainer.appendChild(div);
            });
            document.getElementById('nuevoComentario').value = '';
        }

        async function mostrarComentariosJSON() {
            const response = await fetch('/comentarios-json');
            const data = await response.json();
            document.getElementById('jsonOutput').textContent = JSON.stringify(data, null, 2);
        }
    </script>
</body>
</html>